{% extends 'base.html' %}
{% load static %}
{% block content %}

<section>
  <div class="flex flex-wrap justify-center px-20 gap-6">
    <form action="{% url 'checkout' %}" method="POST">
      {% csrf_token %}
      <div class="flex flex-col rounded-lg p-4 text-center w-60 bg-gray-400" data-aos="fade-up">
        <input
          type="number"
          name="table"
          placeholder="Table number"
          class="p-2 rounded border border-gray-300 mt-2"
          min="0"
          max="20"
          required
        >
        <button type="submit" class="bg-blue-500 hover:bg-blue-600 active:bg-blue-800 text-white px-4 py-2 rounded mt-4 transition duration-300 cursor-pointer">
          View Summary
        </button>
      </div>
    </form>
  </div>
  <form method="POST">
    {% csrf_token %}
    {% if table_number %}
        <div class="flex justify-center mt-10" data-aos="fade-up">
            <div class="bg-gray-200 shadow-md w-110 text-center p-2">
                <h1 class="text-2xl font-bold mb-4">Order Summary for Table {{ table_number }}</h1>
                {% if orders %}
                <div class="flex justify-center gap-3">
                    <div class="justify-center">
                        {% for order in orders %}
                        <p><strong>Item:</strong> {{ order.item.item_name }}</p>
                        {% endfor %}
                    </div>
                    <div class="justify-center">
                        {% for order in orders %}
                        <p><strong>Quantity:</strong> {{ order.quantity }}</p>
                        {% endfor %}
                    </div>
                    <div class="justify-center">
                        {% for order in orders %}
                        <p><strong>Price per Item:</strong> {{ order.item.price }}</p>
                        {% endfor %}
                    </div>
                </div>
                <p>Total: ${{ total }}</p>
                <input type="hidden" name="table" value="{{ table_number }}">
                <button type="submit" name="paid"
                    onclick="return confirm('Are you sure you want to mark this order as paid? This will delete the order.')"
                    class="bg-blue-500 hover:bg-blue-600 active:bg-blue-800 text-white px-4 py-2 rounded mt-4 transition duration-300 cursor-pointer">
                    Paid
                </button>
                {% else %}
                <p class="text-gray-600 mt-4">No orders found for this table.</p>
                {% endif %}
                
            </div>
        </div>
    {% endif %}
  </form>
</section>

{% endblock %}